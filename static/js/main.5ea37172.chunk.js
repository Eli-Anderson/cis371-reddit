(this["webpackJsonpcis371-reddit"]=this["webpackJsonpcis371-reddit"]||[]).push([[0],{116:function(e,t,a){e.exports=a(213)},121:function(e,t,a){},122:function(e,t,a){},213:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(11),c=a.n(l),o=(a(121),a(9)),i=(a(122),a(2)),s=a(275),u=a(29),m=a(214),d=a(253),b=a(97),f=a.n(b),p=a(98),E=a.n(p),h=a(64),g=a.n(h),v=a(16),j=a(222),O=Object(j.a)({by:{marginLeft:6,marginRight:6,fontWeight:"unset"}}),y=function(e){var t=e.time,a=e.userID,l=e.voteCount,c=e.userVote,o=e.onUpvote,b=e.onDownvote,p=e.subreddit,h=O({}),j=Object(n.forwardRef)((function(e,t){var a=e.href,n=Object(i.a)(e,["href"]);return r.a.createElement(v.b,Object.assign({innerRef:t,to:a},n))}));return r.a.createElement(s.a,{display:"flex",flexDirection:"row",alignItems:"center",px:2},r.a.createElement(s.a,null,r.a.createElement(u.a,null,l),r.a.createElement(m.a,{size:"small",onClick:o},r.a.createElement(f.a,{fontSize:"small",color:1===c?"primary":"inherit"})),r.a.createElement(m.a,{size:"small",onClick:b},r.a.createElement(E.a,{fontSize:"small",color:-1===c?"error":"inherit"}))),r.a.createElement(s.a,{flexGrow:1,alignSelf:"flex-end"},r.a.createElement(u.a,{variant:"subtitle2",color:"textSecondary",display:"inline"},t?g.a.duration(g.a.unix(t.seconds).diff(g()())).humanize(!0):"just now"),r.a.createElement(u.a,{variant:"subtitle2",color:"textSecondary",display:"inline",classes:{root:h.by}},"by"),r.a.createElement(d.a,{href:"/u/".concat(a),component:j,variant:"subtitle2"},"/u/".concat(a))),r.a.createElement(s.a,{justifySelf:"flex-end"},r.a.createElement(d.a,{component:j,href:"/r/".concat(p)},"/r/".concat(p))))},w=a(256),x=a(259),C=a(257),S=a(277),k=a(254),I=a(255),D=a(258),P=a(60),R=a.n(P),N=a(99),T=a.n(N),z=function(e){return r.a.createElement(S.a,{open:e.open,onClose:e.onClose},r.a.createElement(k.a,{container:!0,style:{width:"100%",height:"100%"},justify:"center",alignContent:"center"},r.a.createElement(k.a,{item:!0,style:{width:"80%",height:"80%"}},r.a.createElement("div",{style:{width:"100%",height:"80%"}},r.a.createElement(I.a,{size:"small",onClick:e.onClose},r.a.createElement(T.a,null)),r.a.createElement(w.a,{style:{width:"100%",height:"100%",overflow:"scroll",padding:20}},r.a.createElement(C.a,{title:e.title}),r.a.createElement(D.a,null,r.a.createElement(R.a,{source:e.markdown})))))))},A=a(52),B=a.n(A);a(208),a(211);B.a.initializeApp({apiKey:"AIzaSyBjLQQVT_p2WvKcngzlMgwrA8roykW8PvY",authDomain:"cis371reddit.firebaseapp.com",databaseURL:"https://cis371reddit.firebaseio.com",projectId:"cis371reddit",storageBucket:"cis371reddit.appspot.com",messagingSenderId:"408840711489",appId:"1:408840711489:web:8a321096229e2e2ac385c0",measurementId:"G-CR1H4R4FN2"});var W=B.a.firestore(),G=B.a.auth(),L=B.a.firestore.FieldValue.increment,U=B.a.firestore.FieldValue.serverTimestamp,F=function(e){var t=e.postID,a=e.subreddit,l=Object(n.useRef)(null),c=Object(n.useRef)(null),i=Object(n.useState)(!1),s=Object(o.a)(i,2),u=s[0],m=s[1],d=Object(n.useState)(null),b=Object(o.a)(d,2),f=b[0],p=b[1],E=Object(n.useState)(null),h=Object(o.a)(E,2),g=h[0],v=h[1],j=Object(n.useContext)(Ve).user;Object(n.useEffect)((function(){j&&(l.current?l.current():l.current=W.collection("users").doc(j.username).collection("votes").doc(t).onSnapshot((function(e){e.exists&&p(e.data().value)})))}),[t,j]),Object(n.useEffect)((function(){c.current?c.current():c.current=W.collection("subreddits").doc(a).collection("posts").doc(t).onSnapshot((function(e){e.exists&&v(e.data())}))}),[t,a]);var O=function(e,n){j&&(e&&W.collection("subreddits").doc(a).collection("posts").doc(t).update({voteCount:L(e)}),W.collection("users").doc(j.username).collection("votes").doc(t).set({value:n}))};return null===g?r.a.createElement(w.a,{style:{margin:6}},r.a.createElement(x.a,null),r.a.createElement("div",{style:{backgroundColor:"#fafafa"}})):r.a.createElement("div",null,r.a.createElement(w.a,{style:{margin:6}},r.a.createElement(C.a,{onClick:function(){g.content?m(!0):window.open(g.url,"_blank")},style:{textAlign:"left",cursor:"pointer"},title:g.title}),r.a.createElement("div",{style:{backgroundColor:"#fafafa"}},r.a.createElement(y,{subreddit:a,time:g.time,userID:g.userID,voteCount:g.voteCount,userVote:f,onUpvote:function(){var e=0,t=0;-1===f?(e=2,t=1):f?1===f&&(e=-1,t=0):(e=1,t=1),O(e,t)},onDownvote:function(){var e=0,t=0;1===f?(e=-2,t=-1):f?-1===f&&(e=1,t=0):(e=-1,t=-1),O(e,t)}}))),r.a.createElement(z,{open:u,onClose:function(){return m(!1)},markdown:g.content,title:g.title}))},H=a(264),V=a(266),M=a(267),K=a(260),J=a(102),Q=a.n(J),_=a(103),q=a.n(_),Y=a(217),$=a(216),X=a(276),Z=Object(j.a)({paper:{width:"80%",height:"80%",outline:"none"},title:{width:"75%"},content:{width:"75%"},link:{width:"75%"}}),ee=function(e){var t=e.defaultValues,a=e.onSuccess,l=Object(i.a)(e,["defaultValues","onSuccess"]),c=Z(l),m=Object(n.useState)(!1),d=Object(o.a)(m,2),b=d[0],f=d[1],p=Object(n.useState)(t&&t.id||""),E=Object(o.a)(p,2),h=E[0],g=E[1],v=Object(n.useState)(t&&t.name||""),j=Object(o.a)(v,2),O=j[0],y=j[1],w=Object(n.useContext)(Ve).user,x=Object(n.useCallback)((function(){var e={name:O,time:U(),userID:w.username};W.collection("subreddits").doc(h).set(e).then((function(){f(!1),g(""),y("")})).then(a).catch((function(e){console.log(e),window.alert("Something went wrong")}))}),[O,h,a,w]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(K.a,{variant:"contained",color:"primary",onClick:function(){return f(!0)}},t&&t.label||"New Subreddit"),r.a.createElement(Y.a,{in:b},r.a.createElement(S.a,{open:!0,onClose:function(){return f(!1)},onEscapeKeyDown:function(){return f(!1)},onBackdropClick:function(){return f(!1)},style:{display:"flex",alignItems:"center",justifyContent:"center"}},r.a.createElement($.a,{elevation:18,classes:{root:c.paper}},r.a.createElement(s.a,{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",m:2,height:"95%"},r.a.createElement(u.a,{variant:"h4"},"Create a subreddit..."),r.a.createElement(X.a,{classes:{root:c.title},label:"Unique ID",value:"/r/".concat(h),onChange:function(e){return g(e.target.value.substring(3))},margin:"normal",variant:"outlined"}),r.a.createElement(X.a,{classes:{root:c.title},label:"Display Name",value:O,onChange:function(e){return y(e.target.value)},margin:"normal",variant:"outlined"}),r.a.createElement(s.a,{flexGrow:1}),r.a.createElement(s.a,{alignSelf:"flex-end"},r.a.createElement(K.a,{disabled:!h||!O||!w,variant:"contained",color:"primary",onClick:function(){x()}},w?"Create":"Must be signed in")))))))},te=a(261),ae=a(262),ne=a(280),re=a(265),le=a(278),ce=a(279),oe=a(39),ie=a(101),se=a.n(ie),ue=function(e){return r.a.createElement(s.a,{width:"40%",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},e.children)},me=Object(j.a)({paper:{width:"80%",height:"85%",outline:"none"},title:{width:"75%"},content:{width:"75%"},link:{width:"75%"}}),de=function(e){var t=e.iconClass,a=Object(i.a)(e,["iconClass"]),l=me(a),c=Object(oe.g)("/r/:subreddit"),d=Object(n.useState)(!1),b=Object(o.a)(d,2),f=b[0],p=b[1],E=Object(n.useState)(""),h=Object(o.a)(E,2),g=h[0],v=h[1],j=Object(n.useState)("link"),O=Object(o.a)(j,2),y=O[0],w=O[1],x=Object(n.useState)(""),C=Object(o.a)(x,2),k=C[0],I=C[1],D=Object(n.useState)(""),P=Object(o.a)(D,2),N=P[0],T=P[1],z=Object(n.useState)(""),A=Object(o.a)(z,2),B=A[0],G=A[1],L=Object(n.useState)(!1),F=Object(o.a)(L,2),V=F[0],M=F[1],J=Object(n.useContext)(Ve).user,Q=Object(n.useCallback)((function(){var e={title:k,time:U(),voteCount:0,viewCount:0,userID:J.username,subreddit:g};"link"===y?e.url=B:e.content=N,W.collection("subreddits").doc(g).get().then((function(t){t.exists?W.collection("subreddits").doc(g).collection("posts").doc().set(e).then((function(){p(!1),w("link"),I(""),T(""),G(""),M(!1)})).catch((function(e){console.log(e),window.alert("Something went wrong")})):window.alert("That subreddit does not exist")}))}),[g,y,k,B,N,J]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(H.a,{title:"New Post"},r.a.createElement(m.a,{size:"small",onClick:function(){c&&v(c.params.subreddit),p(!0)}},r.a.createElement(se.a,{className:t}))),r.a.createElement(Y.a,{in:f},r.a.createElement(S.a,{open:!0,onClose:function(){return p(!1)},onEscapeKeyDown:function(){return p(!1)},onBackdropClick:function(){return p(!1)},style:{display:"flex",alignItems:"center",justifyContent:"center"}},r.a.createElement($.a,{elevation:18,classes:{root:l.paper}},r.a.createElement(s.a,{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",m:2,height:"95%"},r.a.createElement(u.a,{variant:"h4"},"Create a post..."),r.a.createElement(X.a,{classes:{root:l.title},label:"Subreddit",value:"/r/".concat(g),onChange:function(e){console.log(e.target.value),v(e.target.value.substring(3))},margin:"normal",variant:"outlined"}),r.a.createElement(X.a,{classes:{root:l.title},label:"Title",value:k,onChange:function(e){return I(e.target.value)},margin:"normal",variant:"outlined"}),r.a.createElement(te.a,{component:ue},r.a.createElement(ae.a,{component:"legend"},"Type"),r.a.createElement(ne.a,{name:"type",value:y,onChange:function(e){return w(e.target.value)},row:!0},r.a.createElement(re.a,{value:"link",control:r.a.createElement(le.a,{value:"link"}),label:"Link"}),r.a.createElement(re.a,{value:"markdown",control:r.a.createElement(le.a,{value:"markdown"}),label:"Markdown"}))),"markdown"===y&&!V&&r.a.createElement(X.a,{classes:{root:l.content},label:"Text/Markdown content",value:N,onChange:function(e){return T(e.target.value)},margin:"normal",variant:"outlined",multiline:!0,rows:8}),"markdown"===y&&V&&r.a.createElement(s.a,{border:"1px solid rgba(0,0,0,0.23)",borderRadius:"4px",width:"75%",height:"260px",overflow:"scroll",marginTop:"16px",marginBottom:"8px"},r.a.createElement(R.a,{source:N})),"markdown"===y&&r.a.createElement(re.a,{control:r.a.createElement(ce.a,{checked:V,onChange:function(e,t){return M(t)}}),label:"Preview"}),"link"===y&&r.a.createElement(X.a,{classes:{root:l.link},label:"URL",value:B,onChange:function(e){return G(e.target.value)},margin:"normal",variant:"outlined"}),r.a.createElement(s.a,{flexGrow:1}),r.a.createElement(s.a,{alignSelf:"flex-end"},r.a.createElement(K.a,{disabled:!k||"link"===y&&!B||"markdown"===y&&!N||!J,variant:"contained",color:"primary",onClick:function(){Q()}},J?"Create":"Must be signed in")))))))},be=Object(j.a)({gridListRoot:{margin:"0 !important",height:"100%"},newPostIcon:{width:"2em",height:"2em"}}),fe=function(e){var t=be(e),a=Object(n.useState)(null),l=Object(o.a)(a,2),c=l[0],i=l[1],d=Object(n.useState)(!1),b=Object(o.a)(d,2),f=b[0],p=b[1],E=Object(n.useState)("Home"),h=Object(o.a)(E,2),g=h[0],v=h[1],j=Object(n.useState)(!1),O=Object(o.a)(j,2),y=O[0],w=O[1],C=Object(n.useRef)(null),S=Object(n.useContext)(Ve).user,k=Object(oe.g)("/r/:subreddit"),I=k&&k.params.subreddit,D=Object(n.useCallback)((function(e){I?(p(!0),W.collection("subreddits").doc(I).get().then((function(t){t.exists?(v(t.data().name),C.current&&C.current(),C.current=W.collection("subreddits").doc(I).collection("posts").orderBy("time","desc").limit(4+(e&&e.length||0)).onSnapshot((function(e){p(!1),e.empty?i([]):i(e.docs.map((function(e){return{postID:e.id,subreddit:e.data().subreddit}})))}))):(p(!1),i(null),v("Home"))}))):(v("Home"),p(!0),S?W.collection("users").doc(S.username).get().then((function(t){var a=t.data().subscriptions;a&&a.length&&W.collectionGroup("posts").where("subreddit","in",a).orderBy("time","desc").limit(4+(e&&e.length||0)).onSnapshot((function(e){p(!1),e.empty?i([]):i(e.docs.map((function(e){return{postID:e.id,subreddit:e.data().subreddit}})))}))})):(v("Home"),W.collectionGroup("posts").orderBy("time","desc").limit(4+(e&&e.length||0)).onSnapshot((function(e){p(!1),e.empty?i([]):i(e.docs.map((function(e){return{postID:e.id,subreddit:e.data().subreddit}})))}))))}),[I,S]),P=function(){S&&I&&W.collection("users").doc(S.username).get().then((function(e){var t=e.data().subscriptions,a=[];a=t.indexOf(I)>=0?t.filter((function(e){return e!==I})):t.concat([I]),W.collection("users").doc(S.username).update({subscriptions:a}).then((function(){w((function(e){return!e}))}))}))};if(Object(n.useEffect)((function(){I&&S&&W.collection("users").doc(S.username).get().then((function(e){var t=e.data().subscriptions;w(t&&t.includes(I))}))}),[S,I]),Object(n.useEffect)((function(){D([])}),[D]),null===c&&f)return r.a.createElement(s.a,{margin:"20px"},r.a.createElement(x.a,null));if(null===c)return r.a.createElement("div",null,r.a.createElement(u.a,null,"Oops... This doesn't exist yet"),r.a.createElement(ee,{defaultValues:{id:I,label:"Create /r/".concat(I)},onSuccess:function(){return D(c)}}));var R=function(){return r.a.createElement(s.a,{marginLeft:"16px"},r.a.createElement(H.a,{title:y?"Unsubscribe":"Subscribe"},r.a.createElement(m.a,{size:"small",onClick:P},y?r.a.createElement(Q.a,{style:{width:"1.5em",height:"1.5em"}}):r.a.createElement(q.a,{style:{width:"1.5em",height:"1.5em"}}))))};return c.length>0?r.a.createElement(s.a,{margin:"10px"},r.a.createElement(s.a,{display:"flex",justifyContent:"center"},r.a.createElement(u.a,{variant:"h3"},g),I&&r.a.createElement(R,null)),r.a.createElement(V.a,{cols:2,spacing:20,classes:{root:t.gridListRoot}},c.map((function(e){return r.a.createElement(M.a,{key:e.postID,cols:1,rows:1,style:{height:"unset"}},r.a.createElement(F,Object.assign({},e,{key:e.postID})))}))),f?r.a.createElement(x.a,null):r.a.createElement(K.a,{onClick:function(){D(c)},disabled:f,variant:"outlined"},"Load More")):r.a.createElement(s.a,{width:"100%",display:"flex",flexDirection:"column",alignItems:"center"},r.a.createElement(s.a,{display:"flex",alignItems:"center",justifyContent:"center"},r.a.createElement(u.a,{variant:"h3"},g),I&&r.a.createElement(R,null)),r.a.createElement(s.a,{width:"50%"},r.a.createElement(u.a,{variant:"h6"},"Hmm. We could not find any posts. Why not make the first one?"),r.a.createElement(de,{iconClass:t.newPostIcon})))},pe=a(270),Ee=a(104),he=a.n(Ee),ge=a(271),ve=a(218),je=a(220),Oe=a(272),ye=a(263),we=a(105),xe=a.n(we),Ce=a(268),Se=a(269),ke=Object(Ce.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:"#CFEBDF",borderRadius:"2mm",padding:"1em",boxShadow:e.shadows[5],outline:"none"},inputTable:{display:"grid",gridTemplateColumns:"repeat(1, auto)",borderRadius:"4px",gridGap:"2mm",fontSize:"16px",fontFamily:"Roboto, sans- serif",width:"500px"},buttonGroup:{width:"100 %",padding:"12px",marginRight:"auto",marginLeft:"auto",textAlign:"center",position:"relative"},login:{color:"rgb(90, 241, 173)",fontSize:"16px",alignItems:"center"},signup:{color:"rgb(120, 173, 149)",fontSize:"16px",alignItems:"center"}}})),Ie=function(e){var t=e.open,a=e.onClose,l=Object(i.a)(e,["open","onClose"]),c=ke(l),s=Object(n.useState)(""),u=Object(o.a)(s,2),m=u[0],d=u[1],b=Object(n.useState)(""),f=Object(o.a)(b,2),p=f[0],E=f[1],h=Object(n.useState)(""),g=Object(o.a)(h,2),v=g[0],j=g[1],O=Object(n.useCallback)((function(){G.signInWithEmailAndPassword(m,p).then((function(){return G.setPersistence("local")})).then((function(){a()})).catch((function(e){return window.alert(e)}))}),[m,p,a]),y=Object(n.useCallback)((function(){W.collection("users").doc(v).get().then((function(e){e.exists?window.alert("Username is already in use"):G.createUserWithEmailAndPassword(m,p).then((function(e){G.currentUser.updateProfile({displayName:v}).then((function(){W.collection("users").doc(v).set({subscriptions:[]}).then((function(){a()}))}))})).catch((function(e){return window.alert(e)}))}))}),[m,p,a,v]);return r.a.createElement("div",null,r.a.createElement(S.a,{className:c.modal,open:t,onClose:a,closeAfterTransition:!0,BackdropComponent:Se.a,BackdropProps:{timeout:500}},r.a.createElement(Y.a,{in:t},r.a.createElement("div",{className:c.paper},r.a.createElement("form",null,r.a.createElement("div",{className:c.inputTable},r.a.createElement(X.a,{label:"Email",type:"email",value:m,onChange:function(e){return d(e.target.value)}}),r.a.createElement(X.a,{label:"Password",type:"password",value:p,onChange:function(e){return E(e.target.value)}}),r.a.createElement(X.a,{label:"Username",value:v,onChange:function(e){return j(e.target.value)}})),r.a.createElement("div",{className:c.buttonGroup},r.a.createElement(K.a,{className:c.login,variant:v?void 0:"outlined",disabled:!m||!p,onClick:function(e){e.preventDefault(),O()},type:"submit"},"Log in"),r.a.createElement(K.a,{className:c.signup,variant:v?"outlined":void 0,disabled:!m||!p||!v,onClick:function(){y()}},"Sign up")))))))},De=Object(j.a)({root:{backgroundColor:"rgb(212,234,224)",width:"100%",height:"60%"},spacer:{flexGrow:1},container:{display:"grid",gridTemplateColumns:"repeat(2, auto)",gridGap:"0",cursor:"pointer"},container2:{margin:"4mm 2mm 2mm 2mm",display:"grid",gridTemplateColumns:"repeat(4, auto)",gridGap:"2mm"},logo:{margin:"1.5mm 1mm 0 5mm ",width:"2em",height:"2em",color:"white",background:"red",borderRadius:"100%"},buttons:{width:"1.5em",height:"1.5em"},selfButton:{marginTop:"-1mm",width:"2em",height:"2em",border:"3px solid black",borderRadius:"1mm"}}),Pe=function(e){var t=De(e),a=Object(n.useState)(!1),l=Object(o.a)(a,2),c=l[0],i=l[1],d=Object(n.useRef)(null),b=Object(n.useState)(!1),f=Object(o.a)(b,2),p=f[0],E=f[1],h=Object(oe.f)(),g=Object(n.useContext)(Ve).user,v=function(e){d.current&&d.current.contains(e.target)||i(!1)};return r.a.createElement(k.a,{container:!0,direction:"row",classes:{root:t.root}},r.a.createElement(Ie,{open:p,onClose:function(){return E(!1)}}),r.a.createElement(k.a,{item:!0},r.a.createElement("div",{className:t.container,onClick:function(){h.push("/")}},r.a.createElement(he.a,{className:t.logo}),r.a.createElement(pe.a,null,"The Reddit Project"))),r.a.createElement(k.a,{item:!0,classes:{root:t.spacer}},r.a.createElement("div",null)),r.a.createElement(k.a,{item:!0},r.a.createElement("div",{className:t.container2},r.a.createElement(de,{iconClass:t.buttons}),r.a.createElement(H.a,{title:g?"Account":"Sign in"},r.a.createElement(m.a,{size:"small",ref:d,onClick:function(){g?i(!0):E(!0)}},r.a.createElement(xe.a,{className:t.buttons}))),r.a.createElement(je.a,{open:c,anchorEl:d.current,transition:!0,disablePortal:!0,style:{zIndex:1}},(function(e){var t=e.TransitionProps,a=e.placement;return r.a.createElement(ve.a,Object.assign({},t,{style:{transformOrigin:"bottom"===a?"center top":"center bottom"}}),r.a.createElement($.a,null,r.a.createElement(ge.a,{onClickAway:v},r.a.createElement(ye.a,null,r.a.createElement(s.a,{margin:"4px",borderBottom:"1px solid rgba(0,0,0,0.1)"},r.a.createElement(u.a,{variant:"body2",color:"textSecondary"},"Signed in as"),r.a.createElement(u.a,{variant:"body2",color:"textSecondary"},g?g.username:"")),r.a.createElement(Oe.a,{onClick:function(){h.push("/u/".concat(g.username))}},"Profile"),r.a.createElement(Oe.a,{onClick:function(){G.signOut().then((function(){i(!1)}))}},"Logout")))))})))))},Re=a(219),Ne=a(221),Te=function(e){var t=Object(n.useState)([]),a=Object(o.a)(t,2),l=a[0],c=a[1],i=Object(n.useState)([]),m=Object(o.a)(i,2),d=m[0],b=m[1],f=Object(n.useState)(!1),p=Object(o.a)(f,2),E=p[0],h=p[1],g=Object(n.useContext)(Ve).user,j=Object(n.useRef)(null),O=Object(n.useRef)(null);return Object(n.useEffect)((function(){h(!0),g&&(j.current&&j.current(),j.current=W.collection("users").doc(g.username).onSnapshot((function(e){c(e.data().subscriptions||[])})))}),[g]),Object(n.useEffect)((function(){h(!0),O.current&&O.current(),O.current=W.collection("subreddits").onSnapshot((function(e){b(e.docs.map((function(e){return e.id})).filter((function(e){return!l.includes(e)}))),h(!1)}))}),[l]),g?r.a.createElement($.a,{elevation:4},r.a.createElement(s.a,null,r.a.createElement(Re.a,{dense:!0},r.a.createElement(Ne.a,null,r.a.createElement(s.a,{display:"flex",width:"100%",justifyContent:"center"},r.a.createElement(u.a,{color:"textSecondary",variant:"subtitle2"},"Subscriptions"))),E?r.a.createElement(x.a,null):l.map((function(e){return r.a.createElement(Ne.a,{key:e},r.a.createElement(v.b,{to:"/r/".concat(e)},e))})),r.a.createElement(Ne.a,null,r.a.createElement(s.a,{display:"flex",width:"100%",justifyContent:"center"},r.a.createElement(u.a,{color:"textSecondary",variant:"subtitle2"},"Other Subreddits"))),E?r.a.createElement(x.a,null):d.map((function(e){return r.a.createElement(Ne.a,{key:e},r.a.createElement(v.b,{to:"/r/".concat(e)},e))}))))):r.a.createElement($.a,{elevation:4},r.a.createElement(s.a,null,r.a.createElement(Re.a,{dense:!0},r.a.createElement(Ne.a,null,r.a.createElement(s.a,{display:"flex",width:"100%",justifyContent:"center"},r.a.createElement(u.a,{color:"textSecondary",variant:"subtitle2"},"Subreddits"))),E?r.a.createElement(x.a,null):d.map((function(e){return r.a.createElement(Ne.a,{key:e},r.a.createElement(v.b,{to:"/r/".concat(e)},e))})))))},ze=function(e){return r.a.createElement(s.a,{display:"flex",flexDirection:"column"},r.a.createElement(s.a,{width:"100%",height:"100px"},r.a.createElement(Pe,null)),r.a.createElement(s.a,{width:"100%",display:"flex"},r.a.createElement(s.a,{minWidth:"200px",maxHeight:"calc(100vh - 132px)",padding:"16px",overflow:"scroll"},r.a.createElement(Te,null)),r.a.createElement(s.a,{flexGrow:1,maxHeight:"calc(100vh - 100px)",overflow:"scroll"},r.a.createElement(fe,null))))},Ae=a(12),Be=a(273),We=a(274);function Ge(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var Le=function(e){var t=Object(n.useState)([]),a=Object(o.a)(t,2),l=a[0],c=a[1],i=Object(n.useState)([]),s=Object(o.a)(i,2),m=s[0],d=s[1],b=Object(n.useState)(0),f=Object(o.a)(b,2),p=f[0],E=f[1],h=Object(n.useContext)(Ve).user,g=Object(oe.g)("/u/:username"),j=Ue(e),O=g&&g.params.username,y=h&&h.username===O;return Object(n.useEffect)((function(){O&&(W.collection("users").doc(O).onSnapshot((function(e){var t=e.data();c(t.subscriptions)})),W.collection("users").doc(O).collection("votes").onSnapshot((function(e){E(e.docs.length)})),W.collection("subreddits").onSnapshot((function(e){d(e.docs.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ge(a,!0).forEach((function(t){Object(Ae.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ge(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({id:e.id},e.data())})).filter((function(e){return e.userID===O})))})))}),[O]),r.a.createElement(k.a,null,r.a.createElement(Pe,null),r.a.createElement(k.a,{container:!0,direction:"row",style:{marginTop:"50px"}},r.a.createElement(Be.a,{maxWidth:"xs",style:{textAlign:"left"}},null!==O?r.a.createElement("h2",{style:He},O):r.a.createElement("h2",{style:He},"Username"),y&&r.a.createElement("div",null,r.a.createElement(u.a,{variant:"subtitle2"},"Sign up date: ",h.creationTime,r.a.createElement("br",null)),r.a.createElement(u.a,{variant:"subtitle2"},"Email: ",h.email,r.a.createElement("br",null))),r.a.createElement(u.a,{variant:"subtitle2"},"Number of subscriptions: ",l.length," ",r.a.createElement("br",null)),r.a.createElement(u.a,{variant:"subtitle2"},"Number of subreddits created: ",m.length,r.a.createElement("br",null)),r.a.createElement(u.a,{variant:"subtitle2"},"Number of likes and dislikes: ",p," ",r.a.createElement("br",null))),r.a.createElement(Be.a,{style:Fe,maxWidth:"md"},r.a.createElement(V.a,{cols:2},r.a.createElement(M.a,{classes:{root:j.root}},r.a.createElement(Ne.a,{button:!0,classes:{root:j.button}},r.a.createElement(We.a,{primary:"Subs Created"})),r.a.createElement(Re.a,null,m.length?m.map((function(e){return r.a.createElement(Ne.a,{key:e.id},r.a.createElement(v.b,{to:"/r/".concat(e.id)},e.name))})):r.a.createElement(Ne.a,null,r.a.createElement(We.a,{primary:"Nothing here."})))),r.a.createElement(M.a,{classes:{root:j.root}},r.a.createElement(Ne.a,{button:!0,classes:{root:j.button}},r.a.createElement(We.a,{primary:"Subscriptions"})),r.a.createElement(Re.a,null,l.length?l.map((function(e){return r.a.createElement(Ne.a,{key:e},r.a.createElement(v.b,{to:"/r/".concat(e)},e))})):r.a.createElement(Ne.a,null,r.a.createElement(We.a,{primary:"Nothing here."}))))))))},Ue=Object(j.a)({root:{padding:"0 !important"},button:{border:"1px solid #707070",borderWidth:"2px 1px 2px 1px",textAlign:"center"}}),Fe={border:"3px solid #707070",borderRadius:"4px",height:"80vh",marginLeft:"20px",padding:"0"},He={color:"#5F787C",fontWeight:"bold",textAlign:"center"},Ve=r.a.createContext({user:null});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement((function(){var e=Object(n.useState)(null),t=Object(o.a)(e,2),a=t[0],l=t[1];return Object(n.useEffect)((function(){G.onAuthStateChanged((function(e){l(e?{username:e.displayName,email:e.email,creationTime:e.metadata.creationTime}:null)}))}),[]),r.a.createElement(Ve.Provider,{value:{user:a}},r.a.createElement("div",{className:"App"},r.a.createElement(v.a,null,r.a.createElement(oe.c,null,r.a.createElement(oe.a,{path:"/r/:subreddit",exact:!0},r.a.createElement(ze,null)),r.a.createElement(oe.a,{path:"/",exact:!0},r.a.createElement(ze,null)),r.a.createElement(oe.a,{exact:!0,path:"/u/:username"},r.a.createElement(Le,null))))))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[116,1,2]]]);
//# sourceMappingURL=main.5ea37172.chunk.js.map